<link rel="stylesheet" href="Styles/gallery.css?12" />
<link rel="stylesheet" href="Styles/common.css?123" />

<button id="gallery-back" class="hover_button"> <img id="image-button-back" src="Images/ic_button_back.png" class="button_image" draggable="false" /> </button>

<div id="videoGallery">
</div>

<script>

    function Gallery_refreshHoveringEffect() {
        var hoverButtons = document.getElementsByClassName('hover_button');
        Array.prototype.forEach.call(hoverButtons, function (el) {
            if (isMobile()) {
                el.onmousedown = function () {
                    this.style.backgroundColor = '#D3D3D37A';
                };
                el.onmouseup = function () {
                    this.style.backgroundColor = '#ff000000';
                };
            } else {
                el.onmouseover = function () {
                    this.style.backgroundColor = '#D3D3D37A';
                };
                el.onmouseout = function () {
                    this.style.backgroundColor = '#ff000000';
                };
            }
        });
    }

    const gallery = document.getElementById("videoGallery");


    //load gallery thumbnails
    $.getJSON('Videos/thumbnails-metadata.json?123', function (actual_JSON) {

        const thumbs = actual_JSON['thumbnails'];
        Object.keys(thumbs).forEach(function (thumbKey) {      
        //this links them to their video (as a button)
            gallery.innerHTML += '<button class="hover_button gallery-thumbnail-button"> <img id="' + encodeURI(thumbs[encodeURI(thumbKey)]['video']).replace(/\+/g, "%2B") + '" class="button_image" src="' + encodeURI(thumbs[encodeURI(thumbKey)]['thumbnail']).replace(/\+/g, "%2B") + '" draggable="false" /> </button>';
        });

    });

    // // old gallery thumbnail loading
    // $.getJSON('Videos/videos-metadata.json?123', function (actual_JSON) {
    //     // Parse JSON string into object
    //     //var actual_JSON = JSON.parse(response);

    //     //console.log('JSON content: ' + actual_JSON);

    //     const videos = actual_JSON['videos'];
    //     Object.keys(videos).forEach(function (videoKey) {      
    //         // var emots = videos[videoKey]['emotions']; 
    //         // var tims = videos[videoKey]['times'];

    //         // var newVid = new arrVideo(videos[videoKey]['video'], emots, tims);
    //         // arrVideoList.push(newVid);
    //         // //console.log(newVid);

    //         //console.log(videos[videoKey]['video']);
    //         gallery.innerHTML += '<button class="hover_button gallery-thumbnail-button"> <img id="' + videos[videoKey]['video'] + '" class="button_image" src="' + videos[videoKey]['thumbnail'] + '" draggable="false" /> </button>';
    //     });

    //     $('.gallery-thumbnail-button').click(function () {
    //         console.log('Playing ' + this.childNodes[1].id);
    //         //$('#gallery-back').click();
    //         //Learn_setVideo(this.childNodes[1].id);
            
    //         //_gallery_prevDiv.style.display = 'inline';
    //         //divGallery.style.display = 'none';

    //         //load video + emotion
    //         //add to list and remove after
    //         //console.log("Chosen vid from gallery: " + this.childNodes[1].id);
    //         //$.FromGallery(this.childNodes[1].id, "anger");
    //         //$.matchClicked(this.childNodes[1].id);
    //     });


    //     Gallery_refreshHoveringEffect();
    // });

</script>

<script>
    $.getScript("Scripts/My/Gallery.js?123");
</script>
